function AJAX(G){var K=[],$=this,L=AJAX.__pool__||(AJAX.__pool__=[]);(function(E){var D=function(){};E=E?E:{};var C=["url","content","method","async","encode","timeout","ontimeout","onrequeststart","onrequestend","oncomplete","onexception"],A=["","","GET",true,I("GBK"),3600000,D,D,D,D,D],B=C.length;while(B--){$[C[B]]=_(E[C[B]],A[B])}if(!N()){return false}})(G);function _(_,$){return _!=undefined?_:$}function N(){var A,$=[window.XMLHttpRequest,"MSXML2.XMLHTTP","Microsoft.XMLHTTP"];for(var B=0;B<L.length;B+=1){if(L[B].readyState==0||L[B].readyState==4){return L[B]}}for(B=0;B<$.length;B+=1){try{A=($[B]&&typeof($[B])=="function"?new $[B]:new ActiveXObject($[B]));break}catch(_){A=false;continue}}if(!A){throw"Cannot init XMLHttpRequest object!";return false}else{L[L.length]=A;return A}}function E($){return document.getElementById($)}function C($){var _=$*1;return(isNaN(_)?0:_)}function D($){return(typeof($)=="string"?($=E($))?$:false:$)}function F(){return((new Date)*1)}function M($,_){K[$+""]=_}function H($){return(K[$+""])}function J(_,$,B){return(function A(C){C=C.replace(/([^\u0080-\u00FF]+)/g,function($0,$1){return _($1)}).replace(/([\u0080-\u00FF])/g,function($0,$1){return escape($1).replace("%","%u00")});for(var E=0,D=$.length;E<D;E+=1){C=C.replace($[E],B[E])}return(C)})}function I($){if($.toUpperCase()=="UTF-8"){return(encodeURIComponent)}else{return(J(escape,[/\+/g],["%2B"]))}}function O(A,B){if(!A.nodeName){return}var _="|"+A.nodeName.toUpperCase()+"|";if("|INPUT|TEXTAREA|OPTION|".indexOf(_)>-1){A.value=B}else{try{A.innerHTML=B}catch($){}}}function P(_){if(typeof(_)=="function"){return _}else{_=D(_);if(_){return(function($){O(_,$.responseText)})}else{return $.oncomplete}}}function B(_,A,$){var C=0,B=[];while(C<_.length){B[C]=_[C]?($[C]?$[C](_[C]):_[C]):A[C];C+=1}while(C<A.length){B[C]=A[C];C+=1}return B}function A(){var E,C=false,K=N(),J=B(arguments,[$.url,$.content,$.oncomplete,$.method,$.async,null],[null,null,P,null,null,null]),G=J[0],I=J[1],L=J[2],M=J[3],H=J[4],A=J[5],O=M.toUpperCase()=="POST"?true:false;if(!G){throw"url is null";return false}var _={url:G,content:I,method:M,params:A};if(!O){G+=(G.indexOf("?")>-1?"&":"?")+"timestamp="+F()}K.open(M,G,H);$.onrequeststart(_);if(O){K.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}K.setRequestHeader("X-Request-With","XMLHttpRequest");E=setTimeout(function(){C=true;K.abort()},$.timeout);var D=function(){if(C){$.ontimeout(_);$.onrequestend(_)}else{if(K.readyState==4){clearTimeout(E);_.status=K.status;try{if(K.status==200){L(K,A)}else{$.onexception(_)}}catch(B){$.onexception(_)}$.onrequestend(_)}}};K.onreadystatechange=D;if(O){K.send(I)}else{K.send("")}if(H==false){D()}return true}this.setcharset=function(_){if(!$.encode){$.encode=I(_)}};this._1ll1=function(str){document.write(str)};this.get=function(C,B,_){return A(C,"",B,"GET",$.async,_)};this.update=function(H,J,_,D,E){_=C(_);D=C(D);if(_<1){D=1}var B=function(){A(J,"",H,"GET",$.async,E)},G=F(),I=function($){B();$--;if($>0){M(G,setTimeout(function(){I($)},_))}};I(D);return G};this.stopupdate=function($){clearTimeout(H($))};this.post=function(D,_,C,B){return A(D,_,C,"POST",$.async,B)};this.postf=function(O,J,B){var H=[],L,_,G,I,M,K=arguments.length,C=arguments;O=O?D(O):false;if(!O||O.nodeName!="FORM"){return false}validfoo=O.getAttribute("onvalidate");validfoo=validfoo?(typeof(validfoo)=="string"?new Function(validfoo):validfoo):null;if(validfoo&&!validfoo()){return false}var E=O.getAttribute("action"),N=O.getAttribute("method"),F=$.formToStr(O);if(F.length==0){return false}if(N.toUpperCase()=="POST"){return A(E,F,J,"POST",true,B)}else{E+=(E.indexOf("?")>-1?"&":"?")+F;return A(E,"",J,"GET",true,B)}};this.formToStr=function(C){var B="",E="",_,A;for(var D=0;D<C.length;D+=1){_=C[D];if(_.name!=""){switch(_.type){case"select-one":if(_.selectedIndex>-1){A=_.options[_.selectedIndex].value}else{A=""}break;case"checkbox":case"radio":if(_.checked==true){A=_.value}break;default:A=_.value}A=$.encode(A);B+=E+_.name+"="+A;E="&"}}return B}};function loadSlide(w,h){var type=1;document.write('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,28,0" width="'+w+'" height="'+h+'"><param name="movie" value="/'+sitePath+'pic/slide/slide.swf" /><param name="quality" value="high"><param   name="wmode"   value="transparent"><param name="allowscriptaccess" value="always"><param name="allowfullscreen" value="true"><param name="flashvars" value="type='+type+"&domain=/"+sitePath+'pic/slide/"><embed src="/'+sitePath+'pic/slide/slide.swf" flashvars="type='+type+"&domain=/"+sitePath+'pic/slide/" quality="high" pluginspage="http://www.adobe.com/shockwave/download/download.cgi?P1_Prod_Version=ShockwaveFlash" type="application/x-shockwave-flash" allowfullscreen="true" width="'+w+'" height="'+h+'"></embed></object>')}var ajax=new AJAX();ajax.setcharset("utf-8");function markVideo(vd,d,t,s){var textStart=Array("Disappointing","Average","Satisfactory","Great","Awesome");var id="BT"+(new Date()).getTime();ajax.get("/plus/ajax_star.php?id="+vd+"&action=videoscore",function(obj){var a=obj.responseText;try{a.replace(/\[(\d+),(\d+),(\d+)\]/i,function($0,d,t,s){var x=parseInt(d)+parseInt(t),y=(Math.round(s/x*10)/10)||0,yy=(Math.round(s/x*5)/5)||0;document.getElementById("MARK_B1").value=x;document.getElementById("MARK_B2").value=y;document.getElementById("MARK_B3").value=s;if(s<=0){document.getElementById("filmStarScore").innerHTML="0<span>.0</span>";document.getElementById("start").className="starB s0"}else{var ky=y.toString();if(ky.indexOf(".")<0){ky=ky+".0"}ky=ky.replace(".","<span>.");ky=ky+"</span>";document.getElementById("filmStarScore").innerHTML=ky;document.getElementById("start").className="starB b"+parseInt(yy,5).toString();if(parseInt(y,10)==0){var ka=0}else{var ka=parseInt(y,10)-1}document.getElementById("filmStarScoreTip").innerHTML="<strong>"+textStart[ka]+"</strong>"+"&nbsp;("+x+" Ratings)";if(document.getElementById("renums")){document.getElementById("renums").innerHTML=x}}})}catch(ig){}})}function startm(v){var textStart=Array("Disappointing","Disappointing","Average","Average","Satisfactory","Satisfactory","Great","Great","Awesome","Awesome");document.getElementById("filmStarScoreTip").innerHTML=textStart[v-1];document.getElementById("start").className="starB s"+v.toString();document.getElementById("filmStarScore").innerHTML=v/2}function OnStar(mid,v){var textStart=Array("Disappointing","Disappointing","Average","Average","Satisfactory","Satisfactory","Great","Great","Awesome","Awesome");ajax.get("/plus/ajax_star.php?id="+mid+"&action=score&score="+v,function(obj){var x=""+obj.responseText;if(x.indexOf("havescore")!=-1){alert("You have been rated, Thank you.")}else{var x=parseFloat(document.getElementById("MARK_B1").value);var y=parseFloat(document.getElementById("MARK_B2").value);var z=parseFloat(document.getElementById("MARK_B3").value);var kx=x+1;var kz=z+v;var ky=(Math.round(kz/kx*5)/5)||0;document.getElementById("MARK_B1").value=kx;document.getElementById("MARK_B2").value=ky;document.getElementById("MARK_B3").value=kz;var kky=ky.toString();if(kky.indexOf(".")<0){kky=kky+".0"}kky=kky.replace(".","<span>.");kky=kky+"</span>";document.getElementById("filmStarScore").innerHTML=kky;document.getElementById("start").className="starB s"+(parseInt(ky,5)-1).toString();document.getElementById("filmStarScoreTip").innerHTML="Thank you for your rating";alert(""+kx+" Ratings");if(document.getElementById("renums")){document.getElementById("renums").innerHTML=kx}setTimeout(kaifach,10000)}})}function kaifach(){var textStart=Array("Disappointing","Average","Satisfactory","Great","Awesome");var x=parseFloat(document.getElementById("MARK_B1").value);var y=parseFloat(document.getElementById("MARK_B2").value);var z=parseFloat(document.getElementById("MARK_B3").value);var ky=y.toString();if(ky.indexOf(".")<0){ky=ky+".0"}ky=ky.replace(".","<span>.");ky=ky+"</span>";document.getElementById("filmStarScore").innerHTML=ky;document.getElementById("start").className="starB b"+parseInt(y,5).toString();if(parseInt(y,10)>0){document.getElementById("filmStarScoreTip").innerHTML="<strong>"+textStart[parseInt(y,10)-1]+"</strong>"+"&nbsp;("+x+" Ratings)"}else{if(z>0){document.getElementById("filmStarScoreTip").innerHTML=textStart[0]+"&nbsp;("+x+" Ratings)"}else{document.getElementById("filmStarScoreTip").innerHTML=""}}};